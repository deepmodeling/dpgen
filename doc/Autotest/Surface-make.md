**Step 1.** Based on the equilibrium configuration, `generate_all_slabs` module in [pymatgen.core.surface](https://pymatgen.org/pymatgen.core.surface.html) would help to generate surface structure list with using `max_miller`, `min_slab_size`, and `min_vacuum_size` parameters. 

**Step 2.** If `refine` is True, we do [refine process](https://github.com/deepmodeling/dpgen/wiki/Refine:-get-started-and-input-examples). If `reprod-opt` is True (the default is False), we do [reproduce process](https://github.com/deepmodeling/dpgen/wiki/Reproduce:-get-started-and-input-examples). Otherwise, the surface structure (`POSCAR`) with perturbations in xz and miller index information (`miller.out`) are written in the task directory, for example, in `confs/mp-*/interstitial_00/task.000000` with the check and possible removing of the old input files like before.

**Step 3.** In `surface` by VASP, if `change_box` is True (default value is True), `ISIF=4`, if False, `ISIF=2`, and if `static-opt` is True, `NSW=0`. For `surface` by LAMMPS, when `static-opt` is False, `in.lammps` is the same as that in [Relaxation: make](https://github.com/deepmodeling/dpgen/wiki/Relaxation:-make) when `change_box` is True or the same as that in [EOS: make](https://github.com/deepmodeling/dpgen/wiki/EOS:-make) when `change_box` is False. When `static-opt` is True, the same `in.lammps` as that in `VASP to LAMMPS` of [Reproduce: make](https://github.com/deepmodeling/dpgen/wiki/Reproduce:-make) would be written.